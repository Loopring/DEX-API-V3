
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Orders Â· Loopring API</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codetabs/codetabs.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-insert-logo/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-flexible-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="examples.html" />
    
    
    <link rel="prev" href="signing.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">About</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Loopring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../GLOSSARY.html">
            
                <a href="../GLOSSARY.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Fundamental</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="general_info.html">
            
                <a href="general_info.html">
            
                    
                    General Info
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="key_mgmt.html">
            
                <a href="key_mgmt.html">
            
                    
                    Key Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="signing.html">
            
                <a href="signing.html">
            
                    
                    Request Signing
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.4" data-path="orders.html">
            
                <a href="orders.html">
            
                    
                    Orders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="examples.html">
            
                <a href="examples.html">
            
                    
                    Example Code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="contracts.html">
            
                <a href="contracts.html">
            
                    
                    Smart Contracts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="uat_token.html">
            
                <a href="uat_token.html">
            
                    
                    Uat Tokens
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">API Specification (2.0)</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../REST_APIS.html">
            
                <a href="../REST_APIS.html">
            
                    
                    REST API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../dex_apis/getTimestamp.html">
            
                <a href="../dex_apis/getTimestamp.html">
            
                    
                    Get relayer's current time
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../dex_apis/getApiKey.html">
            
                <a href="../dex_apis/getApiKey.html">
            
                    
                    Get user ApiKey
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../dex_apis/applyApiKey.html">
            
                <a href="../dex_apis/applyApiKey.html">
            
                    
                    Update user's ApiKey
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../dex_apis/getNextStorageId.html">
            
                <a href="../dex_apis/getNextStorageId.html">
            
                    
                    Get next storage ID
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="../dex_apis/getOrderDetail.html">
            
                <a href="../dex_apis/getOrderDetail.html">
            
                    
                    Get order details
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="../dex_apis/submitOrderV3.html">
            
                <a href="../dex_apis/submitOrderV3.html">
            
                    
                    Submit an order
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.7" data-path="../dex_apis/cancelOrder.html">
            
                <a href="../dex_apis/cancelOrder.html">
            
                    
                    Cancel order
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.8" data-path="../dex_apis/getOrders.html">
            
                <a href="../dex_apis/getOrders.html">
            
                    
                    Get multiple orders
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.9" data-path="../dex_apis/getMarkets.html">
            
                <a href="../dex_apis/getMarkets.html">
            
                    
                    Get market configurations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.10" data-path="../dex_apis/getTokens.html">
            
                <a href="../dex_apis/getTokens.html">
            
                    
                    Get token configurations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.11" data-path="../dex_apis/getExchangeInfo.html">
            
                <a href="../dex_apis/getExchangeInfo.html">
            
                    
                    Get exchange configurations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.12" data-path="../dex_apis/getDepth.html">
            
                <a href="../dex_apis/getDepth.html">
            
                    
                    Get market orderbook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.13" data-path="../dex_apis/getTicker.html">
            
                <a href="../dex_apis/getTicker.html">
            
                    
                    Get market ticker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.14" data-path="../dex_apis/getCandlestick.html">
            
                <a href="../dex_apis/getCandlestick.html">
            
                    
                    Get market candlestick
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.15" data-path="../dex_apis/getPrice.html">
            
                <a href="../dex_apis/getPrice.html">
            
                    
                    Get token fiat prices
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.16" data-path="../dex_apis/getMarketTrade.html">
            
                <a href="../dex_apis/getMarketTrade.html">
            
                    
                    Get market recent trades
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.17" data-path="../dex_apis/submitTransfer.html">
            
                <a href="../dex_apis/submitTransfer.html">
            
                    
                    Submit internal transfer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.18" data-path="../dex_apis/getAccount.html">
            
                <a href="../dex_apis/getAccount.html">
            
                    
                    Query user information
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.19" data-path="../dex_apis/submitUpdateAccount.html">
            
                <a href="../dex_apis/submitUpdateAccount.html">
            
                    
                    Update account EDDSA key
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.20" data-path="../dex_apis/getUserCreate.html">
            
                <a href="../dex_apis/getUserCreate.html">
            
                    
                    Get user registration transactions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.21" data-path="../dex_apis/getUserUpdate.html">
            
                <a href="../dex_apis/getUserUpdate.html">
            
                    
                    Get password reset transactions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.22" data-path="../dex_apis/getUserBalances.html">
            
                <a href="../dex_apis/getUserBalances.html">
            
                    
                    Get user exchange balances
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.23" data-path="../dex_apis/getUserDeposits.html">
            
                <a href="../dex_apis/getUserDeposits.html">
            
                    
                    Get user deposit history
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.24" data-path="../dex_apis/getUserWithdrawals.html">
            
                <a href="../dex_apis/getUserWithdrawals.html">
            
                    
                    Get user onchain withdrawal history
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.25" data-path="../dex_apis/submitOffChainWithdrawal.html">
            
                <a href="../dex_apis/submitOffChainWithdrawal.html">
            
                    
                    Submit offchain withdraw request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.26" data-path="../dex_apis/getUserTransfers.html">
            
                <a href="../dex_apis/getUserTransfers.html">
            
                    
                    Get user transfer list
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.27" data-path="../dex_apis/getUserTrades.html">
            
                <a href="../dex_apis/getUserTrades.html">
            
                    
                    Get user trade history
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.28" data-path="../dex_apis/getUserFeeRates.html">
            
                <a href="../dex_apis/getUserFeeRates.html">
            
                    
                    Query user place order fee rate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.29" data-path="../dex_apis/getAmmPools.html">
            
                <a href="../dex_apis/getAmmPools.html">
            
                    
                    Get AMM pool configurations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.30" data-path="../dex_apis/getAmmPoolBalance.html">
            
                <a href="../dex_apis/getAmmPoolBalance.html">
            
                    
                    Get AMM pool balance snapshot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.31" data-path="../dex_apis/submitAmmPoolJoin.html">
            
                <a href="../dex_apis/submitAmmPoolJoin.html">
            
                    
                    Join into AMM pool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.32" data-path="../dex_apis/submitAmmPoolExit.html">
            
                <a href="../dex_apis/submitAmmPoolExit.html">
            
                    
                    Exit an AMM pool
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.33" data-path="../dex_apis/getAmmUserTransactions.html">
            
                <a href="../dex_apis/getAmmUserTransactions.html">
            
                    
                    User's AMM join/exit transactions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.34" data-path="../dex_apis/getAmmTrades.html">
            
                <a href="../dex_apis/getAmmTrades.html">
            
                    
                    get AMM pool trade transactions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../websocket/overview.html">
            
                <a href="../websocket/overview.html">
            
                    
                    WebSocket API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../websocket/account.html">
            
                <a href="../websocket/account.html">
            
                    
                    Account Notification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="../websocket/order.html">
            
                <a href="../websocket/order.html">
            
                    
                    Order Notification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../websocket/orderbook.html">
            
                <a href="../websocket/orderbook.html">
            
                    
                    Orderbook Notification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="../websocket/trade.html">
            
                <a href="../websocket/trade.html">
            
                    
                    Trade Notification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="../websocket/ticker.html">
            
                <a href="../websocket/ticker.html">
            
                    
                    Ticker Notification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="../websocket/candlestick.html">
            
                <a href="../websocket/candlestick.html">
            
                    
                    Candlestick Notification
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Orders</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="orders">Orders</h1>
<h2 id="uni-directional-order-model">Uni-Directional Order Model</h2>
<p>Unlike the order models of most centralized exchanges, Loopring uses the <strong>Uni-Directional Order Model</strong> (UDOM). UDOM represents buy orders and sell orders uniformly with one single data structure. Let&apos;s start with a simplified UDOM model to give you a few examples of Loopring&apos;s limit price orders (Loopring doesn&apos;t support market price orders).</p>
<p>In the LRC-ETH trading pair, a <strong>sell</strong> order that sells 500 LRC at the price of 0.03ETH/LRC can be expressed as:</p>
<pre><code class="lang-JSON">{   <span class="hljs-comment">// LRC-ETH: sell 500 LRC at 0.03ETH/LRC</span>
    <span class="hljs-string">&quot;sellToken&quot;</span>: {
        <span class="hljs-string">&quot;token&quot;</span> : <span class="hljs-string">&quot;LRC&quot;</span>,
        <span class="hljs-string">&quot;volume&quot;</span> : <span class="hljs-number">500</span>
    },
    <span class="hljs-string">&quot;buyToken&quot;</span>: {
        <span class="hljs-string">&quot;token&quot;</span> : <span class="hljs-string">&quot;ETH&quot;</span>,
        <span class="hljs-string">&quot;volume&quot;</span> : <span class="hljs-number">15</span>
    }
}
</code></pre>
<p>a <strong>buy</strong> order that buys 500 LRC at the price of 0.03ETH/LRC can be expressed as:</p>
<pre><code class="lang-JSON">{   <span class="hljs-comment">// LRC-ETH: buy 500 LRC at 0.03ETH/LRC</span>
    <span class="hljs-string">&quot;sellToken&quot;</span>: {
        <span class="hljs-string">&quot;token&quot;</span> : <span class="hljs-string">&quot;ETH&quot;</span>,
        <span class="hljs-string">&quot;volume&quot;</span> : <span class="hljs-number">15</span>
    },
    <span class="hljs-string">&quot;buyToken&quot;</span>: {
        <span class="hljs-string">&quot;token&quot;</span> : <span class="hljs-string">&quot;LRC&quot;</span>,
        <span class="hljs-string">&quot;volume&quot;</span> : <span class="hljs-number">500</span>
    }
}
</code></pre>
<p>As you may have noticed, UDOM does not specify trading pairs or prices explicitly.</p>
<p>However, there is a problem with this simplified model: the match-engine doesn&apos;t know when an order should be considered as <strong>fully filled</strong>. We need to introduce another parameter called <code>buy</code> for this purpose. If <code>buy == true</code>, the match-engine shall check the total fill amount of <code>tokenB</code> against <code>amountB</code> to determine if an order has been fully filled; otherwise, it shall use the total fill amount of <code>tokenS</code> against <code>amountS</code>. With this new field, the above orders will look like the following: </p>
<pre><code class="lang-JSON">{   <span class="hljs-comment">// LRC-ETH: sell 500 LRC at 0.03ETH/LRC</span>
    <span class="hljs-string">&quot;sellToken&quot;</span>: {
        <span class="hljs-string">&quot;token&quot;</span> : <span class="hljs-string">&quot;LRC&quot;</span>,
        <span class="hljs-string">&quot;volume&quot;</span> : <span class="hljs-number">500</span>
    },
    <span class="hljs-string">&quot;buyToken&quot;</span>: {
        <span class="hljs-string">&quot;token&quot;</span> : <span class="hljs-string">&quot;ETH&quot;</span>,
        <span class="hljs-string">&quot;volume&quot;</span> : <span class="hljs-number">15</span>
    }, <span class="hljs-comment">// = 500 * 0.03, </span>
    <span class="hljs-string">&quot;fillAmountBOrS&quot;</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// check sell token&apos;s fill amount against [&quot;sellToken&quot;][&quot;volume&quot;]</span>
}
</code></pre>
<pre><code class="lang-JSON">{   <span class="hljs-comment">// LRC-ETH: buy 500 LRC at 0.03ETH/LRC</span>
    <span class="hljs-string">&quot;sellToken&quot;</span>: {
        <span class="hljs-string">&quot;token&quot;</span> : <span class="hljs-string">&quot;ETH&quot;</span>,
        <span class="hljs-string">&quot;volume&quot;</span> : <span class="hljs-number">15</span>
    }, <span class="hljs-comment">// = 500 * 0.03, </span>
    <span class="hljs-string">&quot;buyToken&quot;</span>: {
        <span class="hljs-string">&quot;token&quot;</span> : <span class="hljs-string">&quot;LRC&quot;</span>,
        <span class="hljs-string">&quot;volume&quot;</span> : <span class="hljs-number">500</span>
    }
    <span class="hljs-string">&quot;fillAmountBOrS&quot;</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// check buy token&apos;s fill amount against [&quot;buyToken&quot;][&quot;volume&quot;]</span>
}
</code></pre>
<p>Note: If the above sell order is fully filled, the amount of ETH bought may be larger than 15ETH; and if the buy order is fully filled, the ETH paid may be less than 15ETH, which is the impact of the <code>fillAmountBOrS</code> parameter on the match engine&apos;s behaviors.</p>
<p>What is the effect of reversing the <code>fillAmountBOrS</code> value in the two orders above? The sell order for the LRC-ETH trading pair becomes a buy order for the ETH-LRC trading pair, and the buy order for the LRC-ETH trading pair becomes a sell order for the ETH-LRC trading pair. It means one Loopring trading pair, such as LRC-ETH, is equivalent to two trading pairs in many centralized exchanges, i.e.,  LRC-ETH and ETH-LRC.</p>
<p>Besides its elegancy and simplicity, Loopring&apos;s UDOM also makes it possible to implement much simpler settlement logic in ZKP circuits.</p>
<p><div class="alert alert-info hints-alert"><div class="hints-icon"><i class="fa fa-info-circle"></i></div><div class="hints-container"><p>So far <strong>AMM swap order</strong> does NOT support <code>fillAmountBOrS</code>, so, please set <code>fillAmountBOrS</code> to <code>false</code> in swap request.</p>
</div></div></p>
<h2 id="order-object">Order object</h2>
<p>Loopring&apos;s actual order format is a bit more complex. You can use the following JSON to express a limit price order. For details of specific parameters, see <a href="../dex_apis/submitOrder.md">Submit Order</a>.</p>
<pre><code class="lang-JSON">order = {
    <span class="hljs-comment">// sign part</span>
    <span class="hljs-string">&quot;exchange&quot;</span>      : <span class="hljs-string">&quot;0x7489DE8c7C1Ee35101196ec650931D7bef9FdAD2&quot;</span>,
    <span class="hljs-string">&quot;accountId&quot;</span>     : <span class="hljs-number">10004</span>,
    <span class="hljs-string">&quot;storageId&quot;</span>     : <span class="hljs-number">0</span>,
    <span class="hljs-string">&quot;sellToken&quot;</span>: {
        <span class="hljs-string">&quot;tokenId&quot;</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// ETH</span>
        <span class="hljs-string">&quot;volume&quot;</span>: <span class="hljs-string">&quot;15000000000000000000&quot;</span>
    },
    <span class="hljs-string">&quot;buyToken&quot;</span> : {
        <span class="hljs-string">&quot;tokenId&quot;</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// LRC</span>
        <span class="hljs-string">&quot;volume&quot;</span>: <span class="hljs-string">&quot;500000000000000000000&quot;</span>
    },
    <span class="hljs-string">&quot;validUntil&quot;</span>    : <span class="hljs-number">1700000000</span>,
    <span class="hljs-string">&quot;maxFeeBips&quot;</span>    : <span class="hljs-number">50</span>,
    <span class="hljs-string">&quot;fillAmountBOrS&quot;</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">&quot;taker&quot;</span>         : <span class="hljs-string">&quot;0000000000000000000000000000000000000000&quot;</span>,
    <span class="hljs-comment">// aux data</span>
    <span class="hljs-string">&quot;allOrNone&quot;</span>     : <span class="hljs-literal">false</span>,
    <span class="hljs-string">&quot;clientOrderId&quot;</span> : <span class="hljs-string">&quot;SampleOrder&quot;</span>,
    <span class="hljs-string">&quot;orderType&quot;</span>     : <span class="hljs-string">&quot;LIMIT_ORDER&quot;</span>, <span class="hljs-comment">// &quot;AMM&quot;, &quot;MAKER_ONLY&quot;, &quot;TAKER_ONLY&quot;</span>
    <span class="hljs-string">&quot;channelId&quot;</span>     : <span class="hljs-string">&quot;channel1::maker1&quot;</span>
    <span class="hljs-comment">// signature</span>
    <span class="hljs-string">&quot;eddsaSignature&quot;</span>:<span class="hljs-string">&quot;0x1c31e81cdde3c9f92e31ab35733e3403de45325cb5f90832c9d4f8673ec22f501de9e9b97c8d7b475ab12836d87c9c6f2a78a91cd650bc77ec4079ffd966933f10d6a5c133ee270013f1d8596c706f2623d0ba1c3dccbc3f202db606bb00d6bc&quot;</span> <span class="hljs-comment">// 0x + 192 bytes hex string, i.e., 0x+Rx+Ry+s</span>
}
</code></pre>
<p>Next, we will further explain some of these data fields for you.</p>
<h4 id="tokens-and-amounts">Tokens and Amounts</h4>
<p>In an actual order,  tokens are not expressed by their names or ERC20 addresses, but by their <strong>token ID</strong>, the index at which the tokens have been registered in the Loopring Exchange&apos;s smart contract.  Note that the same ERC20 token may have different IDs on different exchanges built on top of the same Loopring protocol.</p>
<p>In the above example, we assume that the IDs of LRC and ETH are 1 and 0, respectively.
You can query token&apos;s information using <a href="../dex_apis/getTokens.html">Token Information Supported by the Exchange</a>.</p>
<p>The amounts of tokens are in their smallest unit as strings. Taking LRC as an example, its <code>decimals</code> is 18, so 1.0LRC should be expressed as <code>&quot; 1000000000000000000 &quot;</code> (1 followed by 18 0s). Each token&apos;s <code>decimals</code> is coded in its smart contract; the decimals of ETH is 18.</p>
<h4 id="trading-fee">Trading Fee</h4>
<p><code>maxFeeBips = 50</code> specifies that the <strong>maximum trading fee</strong> the order is willing to pay to the exchange is 0.5% (the unit of <code>maxFeeBips</code> is 0.01%). Loopring charges trading fees in <code>tokenB</code> as a percentage of the token bought from a trade. Assuming that the order above has bought <code>&quot;10000000000000000000&quot;</code> ETH (10ETH), the actual trading fee <strong>will not exceed 0.05ETH</strong> (<code>&quot;10000000000000000000&quot;* 0.5%</code>).</p>
<p>Loopring&apos;s relayer offers different trading fee discounts based on the user VIP tiers. The bottom line is that the actual trading fees can never exceed the maximum orders are willing to pay, specified by <code>maxFeeBips</code>. </p>
<p>When you place an order, you must set <code>maxFeeBips</code> to be no less than the trading fee rate in the specified trading pair for your account (based on your VIP level). This information can be obtained by querying <code>/api/v3/user/feeRates</code>. If you trust Loopring Exchange, you can also set <code>maxFeeBips</code> to 63, the maximum value allowed by the Loopring protocol.</p>
<h4 id="timestamps">Timestamps</h4>
<p><code>validUntil</code> specifies the order expiration timestamp, both in seconds since epoch.</p>
<p>When the relayer receives an order, it will verify these two timestamps in the order; Loopring&apos;s ZKP circuit code will also check these two timestamps during settlement. Due to the delay of zkRollup batch processing, and the possible deviation of the time on Ethereum blockchain and our servers, we strongly recommend that <code>validSince</code> be set to the current time,and the window between <code>validSince</code> and<code>validUntil</code> is no shorter than 1 week; otherwise, your order may be rejected or cancelled by the relayer.</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>You can take advantage of the <code>validUntil</code> timestamp to avoid unnecessary proactive cancellation of orders.</p>
</div></div></p>
<h4 id="fill-status-and-storage-id">Fill Status and Storage ID</h4>
<p>Loopring 3.6 reserves half of 16384 (<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mn>1</mn><mn>4</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2 ^ {14} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="msupsub"><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped mtight"><span class="mord scriptstyle uncramped mtight"><span class="mord mathrm mtight">1</span><span class="mord mathrm mtight">4</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span>) slots for each token to track token amounts changs introduced by <strong>order</strong> and <strong>AMM swap order</strong>, and the other half slots for each token to track the user&apos;s offchain requests include <strong>AMM join/exit</strong>, <strong>transfer</strong> and <strong>withdraw</strong> . If an order&apos;s storage ID is <code>N</code>, then the slot used is <code>N % 16384</code>. In other words, if the slot number is <code>m</code>, it will be used to track orders with the following IDs:  <code>m</code>, <code>m + 16384</code>, <code>m + 16384 * 2</code>, ... and so on.</p>
<p>Each slot also remembers the ID of the current order being tracked (the initial storage ID is the slot number), and subsequent orders with smaller storage IDs will be rejected. Suppose that slot <code>1</code> is tracking order <code>32769</code> (<code>1 + 16384 * 2</code>). When the user places orders with ID of <code>1</code> or<code>16385</code>, the server will reject these orders and return errors. If you have more than <code>16384</code> active orders for a trading pair, you need to cancel some of them to release slots before you can submit new orders.</p>
<p><code>Storage ID</code>is the upgraded <code>Order ID</code> of Loopring 3.1, which has big enough capacity, and more usages, See Below table:</p>
<table>
<thead>
<tr>
<th>Storage ID</th>
<th>Ranges</th>
<th>Count</th>
<th>Usages</th>
</tr>
</thead>
<tbody>
<tr>
<td>Even numbers</td>
<td>{0, 2, 4,<br>...,<br>4294967292&#xFF0C; 4294967294}</td>
<td>2147483648</td>
<td>transfer<br>withdrawal<br>AMM join<br>AMM exit</td>
</tr>
<tr>
<td>Odd numbers</td>
<td>{1, 3, 5,<br>...,<br>4294967293&#xFF0C; 4294967295}</td>
<td>2147483648</td>
<td>order<br>AMM swap order</td>
</tr>
</tbody>
</table>
<p>The maximum value of storage ID is <code>4294967296</code> (<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mrow><mn>3</mn><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{32}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord"><span class="mord mathrm">2</span><span class="msupsub"><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="reset-textstyle scriptstyle uncramped mtight"><span class="mord scriptstyle uncramped mtight"><span class="mord mathrm mtight">3</span><span class="mord mathrm mtight">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span></span></span>). After reaching this ID limit, you can neither place orders nor transfer/withdraw balance on the corresponding token. For most users, this is not a problem, as 4294967296 is big enough, although it is possible that an ultra high-frequent (&gt;100 TPS for all time) trader or transfer payer meet out of ID error.</p>
<p>It is worth noting that all <strong>sell orders</strong> from the same account in multiple trading pairs with the same base token (such as LRC-ETH and LRC-USDT) share the same 16384 slots. If you do not plan to maintain the allocation of storage IDs and slots between trading pairs on the client-side, you can register multiple accounts, as recommended above.</p>
<p><div class="alert alert-info hints-alert"><div class="hints-icon"><i class="fa fa-info-circle"></i></div><div class="hints-container"><p>We know the inconvenience caused by the slot design. However, this is a design decision made in the Loopring protocol itself. We hope future technological advances can remove this limitation.</p>
</div></div></p>
<h4 id="other-fields">Other Fields</h4>
<ul>
<li><code>exchange</code>: Unlike Looping 3.1, we now use Loopring Exchange&apos;s address as a unique numeric ID in the Looping protocol.</li>
<li><code>accountId</code>: User&apos;s account ID.</li>
<li><code>allOrNone</code>: <code>true</code> if the order must be fully filled or cancelled. This parameter is not supported yet by our matching engine, so please set it to &quot;false&quot; for now.</li>
<li><code>clientOrderId</code>: Used to label orders by the client without user awareness. It also has no impact on trading. </li>
<li><code>channelId</code>: Used to lable order&apos;s channel.</li>
</ul>
<p>For more details, please refer to <a href="../dex_apis/submitOrder.md">Submit Order</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="signing.html" class="navigation navigation-prev " aria-label="Previous page: Request Signing">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="examples.html" class="navigation navigation-next " aria-label="Next page: Example Code">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Orders","level":"2.4","depth":1,"next":{"title":"Example Code","level":"2.5","depth":1,"path":"basics/examples.md","ref":"basics/examples.md","articles":[]},"previous":{"title":"Request Signing","level":"2.3","depth":1,"path":"basics/signing.md","ref":"basics/signing.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","-sharing","-fontsettings","expandable-chapters","custom-favicon","katex","codetabs","search-pro","insert-logo","sharing-plus","flexible-alerts","hints","back-to-top-button","code"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"search-pro":{},"codetabs":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"hints":{"danger":"fa fa-exclamation-circle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"code":{"copyButtons":true},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":1},"highlight":{},"favicon":"./gitbook/images/favicon.ico","back-to-top-button":{},"custom-favicon":{},"flexible-alerts":{"danger":{"className":"danger","icon":"fa fa-ban","label":"Attention"},"note":{"className":"info","icon":"fa fa-info-circle","label":"Note"},"style":"callout","tip":{"className":"tip","icon":"fa fa-lightbulb-o","label":"Tip"},"warning":{"className":"warning","icon":"fa fa-exclamation-triangle","label":"Warning"}},"sharing":{"weibo":true,"facebook":true},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"insert-logo":{"style":"background: none; max-height: 28px; min-height: 28px","url":"https://loopring.io/assets/images/logo.svg"},"expandable-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Loopring API","language":"en","gitbook":"*"},"file":{"path":"basics/orders.md","mtime":"2020-12-25T07:23:37.103Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-12-25T07:23:38.692Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-codetabs/codetabs.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-insert-logo/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-flexible-alerts/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    

    </body>
</html>

